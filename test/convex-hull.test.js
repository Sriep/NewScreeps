/**
 * @fileOverview screeps
 * Created by piers on 28/05/2020
 * @author Piers Shepperson
 */
//const assert = require('assert');
const convexHullTest = require("../src/convex-hull");
//const tile = require("../src/tile");
//const Terrain = require("./terrain");

describe("conves-hull", function() {
    describe("makeHull", function() {
        it("plan hull for centre tile", function() {
            //const terrain = new Terrain("W7N7");
            //const centre = tile.getCopy(tile.CENTRE_6x6_2);
            //const centre = JSON.parse("{"origin":{"x":23,"y":18,"roomName":"W7N7"},"x_dim":6,"y_dim":6,"lab":[{"x":25,"y":20},{"x":25,"y":21},{"x":26,"y":20},{"x":25,"y":22},{"x":26,"y":19},{"x":27,"y":19},{"x":24,"y":21},{"x":24,"y":22},{"x":28,"y":20},{"x":28,"y":21}],"storage":[{"x":27,"y":22}],"terminal":[{"x":26,"y":22}],"link":[{"x":27,"y":21},{"x":2,"y":5,"roomName":"W7N7"},{"x":17,"y":9,"roomName":"W7N7"}],"spawn":[{"x":23,"y":18},{"x":24,"y":19},{"x":28,"y":18}],"powerSpawn":[{"x":23,"y":20}],"cog":[{"x":26,"y":21},{"x":27,"y":20}],"observer":[{"x":23,"y":23}],"tower":[{"x":21,"y":24},{"x":22,"y":24},{"x":23,"y":24},{"x":22,"y":25},{"x":21,"y":26},{"x":23,"y":26}],"extension":[{"x":25,"y":24},{"x":27,"y":24},{"x":25,"y":26},{"x":26,"y":25},{"x":27,"y":26},{"x":29,"y":16},{"x":31,"y":16},{"x":29,"y":18},{"x":30,"y":17},{"x":31,"y":18},{"x":29,"y":20},{"x":31,"y":20},{"x":29,"y":22},{"x":30,"y":21},{"x":31,"y":22},{"x":18,"y":25},{"x":20,"y":25},{"x":18,"y":27},{"x":19,"y":26},{"x":20,"y":27},{"x":15,"y":26},{"x":17,"y":26},{"x":15,"y":28},{"x":16,"y":27},{"x":17,"y":28},{"x":31,"y":10},{"x":33,"y":10},{"x":31,"y":12},{"x":32,"y":11},{"x":33,"y":12},{"x":14,"y":15},{"x":16,"y":15},{"x":14,"y":17},{"x":15,"y":16},{"x":16,"y":17},{"x":22,"y":27},{"x":24,"y":27},{"x":22,"y":29},{"x":23,"y":28},{"x":24,"y":29},{"x":26,"y":27},{"x":28,"y":27},{"x":26,"y":29},{"x":27,"y":28},{"x":28,"y":29},{"x":32,"y":13},{"x":34,"y":13},{"x":32,"y":15},{"x":33,"y":14},{"x":34,"y":15},{"x":32,"y":17},{"x":34,"y":17},{"x":32,"y":19},{"x":33,"y":18},{"x":34,"y":19},{"x":19,"y":28},{"x":21,"y":28},{"x":19,"y":30},{"x":20,"y":29},{"x":21,"y":30}]});
            //centre["origin"] = {x:23, y:18};
            //tile.shiftToOrigin(centre);
            const centre = JSON.parse("{\"origin\":{\"x\":23,\"y\":18,\"roomName\":\"W7N7\"},\"x_dim\":6,\"y_dim\":6,\"lab\":[{\"x\":25,\"y\":20},{\"x\":25,\"y\":21},{\"x\":26,\"y\":20},{\"x\":25,\"y\":22},{\"x\":26,\"y\":19},{\"x\":27,\"y\":19},{\"x\":24,\"y\":21},{\"x\":24,\"y\":22},{\"x\":28,\"y\":20},{\"x\":28,\"y\":21}],\"storage\":[{\"x\":27,\"y\":22}],\"terminal\":[{\"x\":26,\"y\":22}],\"spawn\":[{\"x\":23,\"y\":18},{\"x\":24,\"y\":19},{\"x\":28,\"y\":18}],\"powerSpawn\":[{\"x\":23,\"y\":20}],\"cog\":[{\"x\":26,\"y\":21},{\"x\":27,\"y\":20}],\"observer\":[{\"x\":23,\"y\":23}],\"tower\":[{\"x\":21,\"y\":24},{\"x\":22,\"y\":24},{\"x\":23,\"y\":24},{\"x\":22,\"y\":25},{\"x\":21,\"y\":26},{\"x\":23,\"y\":26}],\"extension\":[{\"x\":25,\"y\":24},{\"x\":27,\"y\":24},{\"x\":25,\"y\":26},{\"x\":26,\"y\":25},{\"x\":27,\"y\":26},{\"x\":29,\"y\":16},{\"x\":31,\"y\":16},{\"x\":29,\"y\":18},{\"x\":30,\"y\":17},{\"x\":31,\"y\":18},{\"x\":29,\"y\":20},{\"x\":31,\"y\":20},{\"x\":29,\"y\":22},{\"x\":30,\"y\":21},{\"x\":31,\"y\":22},{\"x\":18,\"y\":25},{\"x\":20,\"y\":25},{\"x\":18,\"y\":27},{\"x\":19,\"y\":26},{\"x\":20,\"y\":27},{\"x\":15,\"y\":26},{\"x\":17,\"y\":26},{\"x\":15,\"y\":28},{\"x\":16,\"y\":27},{\"x\":17,\"y\":28},{\"x\":31,\"y\":10},{\"x\":33,\"y\":10},{\"x\":31,\"y\":12},{\"x\":32,\"y\":11},{\"x\":33,\"y\":12},{\"x\":14,\"y\":15},{\"x\":16,\"y\":15},{\"x\":14,\"y\":17},{\"x\":15,\"y\":16},{\"x\":16,\"y\":17},{\"x\":22,\"y\":27},{\"x\":24,\"y\":27},{\"x\":22,\"y\":29},{\"x\":23,\"y\":28},{\"x\":24,\"y\":29},{\"x\":26,\"y\":27},{\"x\":28,\"y\":27},{\"x\":26,\"y\":29},{\"x\":27,\"y\":28},{\"x\":28,\"y\":29},{\"x\":32,\"y\":13},{\"x\":34,\"y\":13},{\"x\":32,\"y\":15},{\"x\":33,\"y\":14},{\"x\":34,\"y\":15},{\"x\":32,\"y\":17},{\"x\":34,\"y\":17},{\"x\":32,\"y\":19},{\"x\":33,\"y\":18},{\"x\":34,\"y\":19},{\"x\":19,\"y\":28},{\"x\":21,\"y\":28},{\"x\":19,\"y\":30},{\"x\":20,\"y\":29},{\"x\":21,\"y\":30}]}");
            const pts = [];
            for (let key in centre) {
                if (Array.isArray(centre[key])) {
                    for ( let pt of centre[key]) {
                        pts.push({x:pt.x, y:pt.y})
                    }
                }
            }
            //console.log("pts", JSON.stringify(pts));
            const boundary = convexHullTest.makeHull(pts);
            console.log("convex hull", JSON.stringify(boundary));
        });
    });
});